# Domain Parser (Парсер email и телефонов с сайтов)

## Автор

**Козлов Леонид** [GitHub](https://github.com/KozlovL)

---

## Описание проекта

Проект представляет собой **собственный парсер доменов**, реализованный на Python 3.12. Основная задача — **сбор email-адресов и телефонных номеров** с веб-сайтов, с поддержкой обхода ссылок внутри домена.

Парсер использует **requests + BeautifulSoup** для извлечения данных и **регулярные выражения** для поиска email и телефонов.

> ⚠️ Важно: сайты с **JavaScript-защитой** (например, Cloudflare) парсер обрабатывать не сможет — на таких страницах возвращается только сообщение «Enable JavaScript and cookies to continue».

> ⚠️ Телефоны ищутся только по **российскому формату** или внутри HTML-тега `<a href="tel:...">`.

---

## Функциональность

1. **Парсинг email-адресов**

   * Находит все email в тексте HTML страницы.
   * Работает с ссылками `mailto:` и обычным текстом.
   * Результат выводится списком без дубликатов.

2. **Парсинг телефонов**

   * Поддерживаются только **российские номера** с кодами городов и мобильные.
   * Можно искать телефоны внутри `<a href="tel:...">`.
   * Выводятся уникальные номера в удобном формате.

3. **Обход ссылок внутри домена**

   * Реализован обход страниц через BFS.
   * Учитываются только ссылки на **тот же домен**.
   * Лимит обхода страниц задается через `MAX_PAGES`.

4. **Устойчивость**

   * Пропускаются страницы с некорректным HTML.
   * Пропускаются сетевые ошибки, редиректы на другой домен или не-HTML контент.

5. **Прогресс и логирование**

   * Прогресс-бар показывает процент обработанных страниц.
   * Логируются ошибки загрузки страниц для диагностики.

---

## Структура проекта

```
domain-parser
├─ src
│  ├─ main.py            # Точка входа
│  ├─ parser.py          # Логика парсинга
│  ├─ utils.py           # Вспомогательные функции (извлечение email, телефонов, ссылок)
│  └─ constants.py       # Настройки (MAX_PAGES, USER_AGENT, REQUEST_TIMEOUT)
├─ requirements.txt
└─ README.md
```

---

## Запуск проекта

1. Создайте виртуальное окружение и установите зависимости:

```bash
python -m venv venv
source venv/bin/activate   # Linux/macOS
venv\Scripts\activate    # Windows
pip install -r requirements.txt
```

2. Запустите парсер:

```bash
python -m src.main
```

3. Введите стартовый URL:

```text
Введите стартовый URL для парсинга (или "exit" для выхода): https://example.com/
```

4. После завершения работы выводится список найденных email и телефонов.

---

## Примеры работы

```
URL сайта: https://www.vtb.ru/

Найденные email адреса (15):
  - answer_tula@vtb.ru
  - avto1@vtb.ru
  - ...

Найденные телефоны (52):
  - (495) 739-77-99
  - +7 (495) 785-53-70
  - 88002007799
  - ...
```

> Обратите внимание: номера телефонов показываются только в допустимых форматах, другие цифровые последовательности игнорируются.

---

## Регулярные выражения

* Email: ищет стандартные адреса с `@` и доменом.
* Телефоны: ориентированы на **российские номера** и теги `<a href="tel:...">`.

Пример формата для телефонов:

```
+7 (495) 123-45-67
8(926)123-45-67
(495)1234567
+7 926 123 45 67
```

---
